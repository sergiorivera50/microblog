<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Find all code blocks
        const codeBlocks = document.querySelectorAll('.code-block');

        codeBlocks.forEach(function(block) {
            // Create the copy button
            const copyButton = document.createElement('button');
            copyButton.className = 'copy-button';
            copyButton.textContent = 'Copy';

            // Add click event to copy code
            copyButton.addEventListener('click', function() {
                // Find the code element within the block
                const code = block.querySelector('code') || block;
                const textToCopy = code.textContent;

                // Use the Clipboard API to copy the text
                navigator.clipboard.writeText(textToCopy).then(
                    function() {
                        // Success - change button text temporarily
                        copyButton.textContent = 'Copied!';
                        setTimeout(function() {
                            copyButton.textContent = 'Copy';
                        }, 2000);
                    },
                    function() {
                        // Failure - fallback to a more compatible method
                        copyButton.textContent = 'Failed to copy';
                        setTimeout(function() {
                            copyButton.textContent = 'Copy';
                        }, 2000);
                    }
                );
            });

            // Append the button to the code block
            block.appendChild(copyButton);
        });
    });
</script>
